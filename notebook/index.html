<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>notebook - flyapi</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="baidu-site-verification" content="vuLJkgHfME" />
<meta name="google-site-verification" content="8cFR3XeusGH3CQHrS83cX-JArtnAT1yQF8s-sCSYbQ0" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">






<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"> -->
<link href="https://cdn.bootcss.com/lightgallery/1.6.10/css/lightgallery.min.css" rel="stylesheet">
<!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css"> -->
<link href="https://cdn.bootcss.com/justifiedGallery/3.7.0/css/justifiedGallery.min.css" rel="stylesheet">
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">

<!-- <script defer src="//use.fontawesome.com/releases/v5.0.13/js/all.js"></script> -->

</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                <img src="/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">归档</a>
            
            <a class="navbar-item "
               href="/read">阅读</a>
            
            <a class="navbar-item is-active"
               href="/notebook">工作手册</a>
            
            <a class="navbar-item "
               href="/about">关于</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" href="javascript:;">
                <i class="fa fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" href="https://github.com/flyhero">
                
                <i class="fa fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section" style="overflow: hidden;">
    <div class="container" style="overflow: hidden;">
        <div style="overflow: hidden;">

            <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 id="工作手册"><a href="#工作手册" class="headerlink" title="工作手册"></a>工作手册</h1><p>总结工作中需要注意的方方面面</p>
<h2 id="态度篇"><a href="#态度篇" class="headerlink" title="态度篇"></a>态度篇</h2><ol>
<li>每日小会议总结是必须的（及时沟通）</li>
<li>完不成要提前预警，降低上级部门的预期</li>
<li>着手之前通观全局，决定架构和方案，不要走一步算一步。</li>
<li>把问题问清楚，把问题表述清楚。</li>
<li>把所有东西整理成文档。</li>
<li>有个规划，每日任务</li>
<li>主动承担责任（早晚有意想不到的结果）</li>
<li><p>消息或文件传输后一定要有回执。</p>
<blockquote>
<p>A: 前天让你发给我的文件，怎么到现在还没发送？<br>B：不是已经发给你了吗？（赶紧回头看记录，发现文件前有个感叹号❗️）<br>B：不好意思，不知道是不是网络原因，那天没有发送成功。</p>
</blockquote>
</li>
<li><p>别人指出的问题，不要反感，除非你有理由说服别人你是正确的。</p>
</li>
<li><p>请假要尽量提前一些天，让领导能提前协调大家工作的进展。</p>
</li>
<li>周五结束工作时，列出下周一要做的事情，这样可以减少休息到工作的过度时间。</li>
</ol>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ol>
<li>IDEA 插件下载失败<br>System Setting -&gt; Updates  -&gt; 取消 Use secure connection</li>
</ol>
<h2 id="技术篇"><a href="#技术篇" class="headerlink" title="技术篇"></a>技术篇</h2><h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><ol>
<li>入参一定要打印出来，方法中每个return前要打印说明原因。</li>
<li>循环中谨慎打印日志</li>
</ol>
<h3 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h3><ol>
<li>暴露的服务仅提供的jar应是最简化版，仅包含暴露所需。</li>
<li>使用spring Transactional注解时，注意它只作用于public方法。</li>
</ol>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><ol>
<li>不要在代码循坏语句内连接数据库。这会让数据库内存很快涨起来。</li>
<li>修改mysql server 的最大连接数（默认150个），当你超过时会收到一个异常 <code>Too many connections</code>,有两个命令可以帮到你：</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#查看进程</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">processlist</span>; </span><br><span class="line">#查看最大连接设置</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'max_connections'</span>; </span><br><span class="line">#设置最大连接数</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">GLOBAL</span> max_connections=<span class="number">1500</span>;</span><br></pre></td></tr></table></figure>
<p>这种设置，一旦server重启后就失效了，最根本的是修改配置文件。</p>
<ol start="2">
<li><p>不要在 in 中放置过多内容，会导致程序出现<br><code>Caused by: com.mysql.jdbc.PacketTooBigException: Packet for query is too large (1379 &gt; 1024). You can change this value on the server by setting the max_allowed_packet&#39; variable.</code></p>
</li>
<li><p>不要把数组转成字符串在in中，如果这样，它只会匹配第一个逗号之前的数字（下面例子即只匹配id为1的）。<br>反例：</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String ids = <span class="string">"1,2,3"</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> a <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="string">'1,2,3'</span>)</span><br></pre></td></tr></table></figure>
<p>如果确实需要，你可以修改mysql server 的max_allowed_packet大小。方式如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show variables like <span class="string">'%max_allowed_packet%'</span>;</span><br><span class="line"><span class="comment"># 扩大配置限制，将1024（1M）增大，将其修改为20M</span></span><br><span class="line"><span class="built_in">set</span> global max_allowed_packet = 2*1024*1024*10;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>大小写问题</li>
</ol>
<ul>
<li>库表列名称：windows下默认不区分大小写，linux下默认是区分大小写的。</li>
<li>字段内容：mysql默认的字符检索策略：utf8mb4_general_ci，表示不区分大小写; utf8mb4_bin表示二进制比较，同样也区分大小写。<br>可通过下面来修改表及列的字符集：<br><code>ALTER TABLE table_name DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci</code></li>
</ul>
<h2 id="面试篇"><a href="#面试篇" class="headerlink" title="面试篇"></a>面试篇</h2><ol>
<li>了解清楚公司的产品有多少？用到什么技术？有什么依赖？</li>
<li>同语言开发不低于5人，各个层级是否有人（高中初级）？是否有技术积累（展示渠道，可回家看看）？</li>
<li>公司的环境，吃饭和厕所是比较重要的事情，有时间可以去卫生间看看，一个卫生间基本可以看出工作环境。</li>
<li>最后是关于福利</li>
</ol>

</article>


        </div>

        

                
                    <div class="comments">
                        <h3 class="title is-4">
                            评论
                        </h3>
                        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
	var gitment = new Gitment({
		id: 'notebook/index.html',
		owner: 'flyhero',
		repo: 'flyhero.github.io',
		oauth: {
			client_id: 'ef78f87594d94e06cfac',
			client_secret: '0dea0269b913607af01fc8ab19115b89bdca6235',
		},
	})
	gitment.render('comment-container')
</script>

                    </div>
                    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2016 - 2018 flyhero&nbsp;
                <a href="http://www.miitbeian.gov.cn/">皖ICP备18004846号</a>
            </div>
            
            <div class="column is-hidden-mobile"></div>
        </div>

    <div class="columns">
        <div class="column is-narrow has-text-centered">
                            <span id="busuanzi_container_site_pv">
                                <i class="fa fa-eye"></i>
                                <span id="busuanzi_value_site_pv"></span>次
                            </span>
                            <span id="busuanzi_container_site_uv">
                                <i class="fa fa-user"></i>
                                <span id="busuanzi_value_site_uv"></span>人次
                            </span>
                    &nbsp;Powered by
                    <a href="" target="_blank">Simele</a>&nbsp;&nbsp;
                    base on
                    <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
        </div>
    
        <div class="column is-hidden-mobile"></div>
    
        
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                    
                        
                            <a class="column is-narrow has-text-black" href="https://github.com/flyhero/hexo-theme-simele">
                                
                                    GitHub
                                        
                            </a>
                            
                </div>
            </div>
            
                
    </div>


    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        //plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })

    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    


<script src="//cdn1.lncld.net/static/js/3.6.8/av-min.js"></script>
<script>AV.initialize("BofKiGH8KL9dm9JcFAOS5k2q-gzGzoHsz", "MfK5JCAY0d9Y2dLWKDfFMbeX");</script>
<script>
    function showTime(Counter) {
        
        document.querySelectorAll(".leancloud_visitors").forEach(function (item) {
            console.log(item.id);
            var url = item.id.trim();
            var query = new AV.Query(Counter);
            query.equalTo("url", url);
            query.find().then(function (results) {
                    if (results.length == 0) {
                        document.getElementById(url).innerHTML = 0;
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        document.getElementById(url).innerHTML = object.get('hits');
                    }
                },function (object, error) {
                    console.log("Error: " + error.code + " " + error.message);
                }
            );
        });
    }
    function addCount(Counter) {
        var Counter = AV.Object.extend("Counter");
        url = document.querySelector(".leancloud_visitors").id.trim();
        title = document.querySelector(".leancloud_visitors").getAttribute('data-title').trim();
        var query = new AV.Query(Counter);
        query.equalTo("url", url);
        query.find().then(function (results) {
                if (results.length > 0) {
                    var counter = results[0];
                    counter.fetchWhenSave(true);
                    counter.increment("hits");
                    counter.save().then(function (counter) {
                            document.getElementById(url).innerHTML = counter.get('hits');
                        },function (counter, error) {
                            console.log('Failed to save Visitor num, with error message: ' + error.message);
                        }
                    );
                } else {
                    var newcounter = new Counter();
                    newcounter.set("title", title);
                    newcounter.set("url", url);
                    newcounter.set("hits", 1);
                    newcounter.save().then(function (newcounter) {
                            console.log("newcounter.get('hits')=" + newcounter.get('hits'));
                            document.getElementById(url).innerHTML = newcounter.get('hits');
                        },function (newcounter, error) {
                            console.log('Failed to create');
                        }
                    );
                }
            },function (error) {
                console.log('Error:' + error.code + " " + error.message);
            }
        );
    }
    (function () {
        var Counter = AV.Object.extend("Counter");
        // 如果页面只有一个 leancloud_visitors 则认为它是文章页面
        // 如果有多个，认为它是列表页
        if (document.querySelectorAll('.leancloud_visitors').length == 1) {
            addCount(Counter);
        } else if (document.querySelectorAll('.leancloud_visitors').length > 1) {
            showTime(Counter);
        }
    })();
    </script>
    
    


<script src="/js/script.js"></script>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

                <!-- 
                    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
                    <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
                     -->

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站内搜索" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>